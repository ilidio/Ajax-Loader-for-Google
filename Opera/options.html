<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="options.css">
  <title id="widget-title">Opera Extensions | Name of Extension</title>
</head>
<body>
  <header>
    <img src="icon.png">
    <h1 id="widget-name">Extension name v1.01</h1>
    <h2>Made by <span id="widget-author">Developer</span></h2>
  </header>
  <section>
    <p><a href='https://addons.labs.opera.com/addons/extensions/details/google-ajax-loader/'>Google Ajax Loader</a> is an extension that adds an ajax loader to the Google™ pages (<a href='https://gmail.com' target="_blank">Gmail</a>, <a href='https://www.google.com/calendar/' target="_blank">Google Calendar</a>, <a href='https://docs.google.com/' target="_blank">Google Docs</a>, <a href='http://maps.google.com/' target="_blank">Google Maps</a>, <a href='https://sites.google.com/' target="_blank">Google Sites</a>, <a href='http://www.google.com/reader/' target="_blank">Google Reader</a>, <a href='http://www.orkut.com/' target="_blank">Orkut</a> and <a href="https://plus.google.com/" target="_blank">Google+</a>).</p>

    <h3>Google Ajax Loader</h3>
    <fieldset>  
            Black
            <hr size="1" style='height: 1px;color:#CCC'/>     
            <!-- 1-1 -->
            <div class='option_input'><input id='ajaxloader0' name='ajaxloader' type='radio' value='css/indicator.css' title='Indicator / 指标'/></div>
            <div class='option_image'><img src='./images/ajaxloader_indicator.png' title='Indicator/ 指标'/></div>	
            <div class='option_text'><span class='font_text' title='Indicator / 指标'>Indicator</span></div>	
            <!-- 1-2 Google Default -->
            <div class='option_input'><input id='ajaxloaderg' name='ajaxloader' type='radio' value='css/google.css' title='Google / 谷歌'/></div>
            <div class='option_image'><img src='./images/ajaxloader_google.gif' title='Google / 谷歌'/></div>	
            <div class='option_text'><span class='font_text' title='Google / 谷歌'>Google</span></div>	    
            <!-- 1-3 -->
            <div class='option_input'><input id='ajaxloader1' name='ajaxloader' type='radio' value='css/circleball.css'/></div>
            <div class='option_image'><img src='./images/ajaxloader_circleball.gif' title='Circle ball / 圈球'/></div>
            <div class='option_text'><span class='font_text' title='Circle ball / 圈球'>Circle ball</span></div>
            <!-- 1-4 -->
            <div class='option_input'><input id='ajaxloader2' name='ajaxloader' type='radio' value='css/bouncingball.css' title='Bouncing ball / 弹跳球'/></div>
            <div class='option_image'><img src='./images/ajaxloader_bouncingball.gif' title='Bouncing ball / 弹跳球'/></div>	
            <div class='option_text'><span class='font_text' title='Bouncing ball / 弹跳球'>Bouncing ball</span></div>			
            <div style='clear:both;'></div> 
            <!-- br -->   
            <!-- 2-1 -->
            <div class='option_input'><input id='ajaxloader3' name='ajaxloader' type='radio' value='css/facebook.css' title='Facebook / 注册Facebook！'/></div>
            <div class='option_image'><img src='./images/ajaxloader_facebook.gif' title='Facebook / 注册Facebook！'/></div>	
            <div class='option_text'><span class='font_text' title='Facebook / 注册Facebook！'>Facebook</span></div>	
            <!-- 2-2 -->
            <div class='option_input'><input id='ajaxloader4' name='ajaxloader' type='radio' value='css/flower.css' title='Flower / 花'/></div>
            <div class='option_image'><img src='./images/ajaxloader_flower.gif' title='Flower / 花'/></div>
            <div class='option_text'><span class='font_text' title='Flower / 花'>Flower</span></div>   
            <!-- 2-3 -->
            <div class='option_input'><input id='ajaxloader5' name='ajaxloader' type='radio' value='css/kit.css' title='Kit / 试剂盒'/></div>
            <div class='option_image'><img src='./images/ajaxloader_kit.gif' title='Kit / 试剂盒'/></div>	
            <div class='option_text'><span class='font_text' title='Kit / 试剂盒'>Kit</span></div>			
            <!-- 2-4 -->
            <div class='option_input'><input id='ajaxloader6' name='ajaxloader' type='radio' value='css/roller.css' title='Roller / 辊'/></div>
            <div class='option_image'><img src='./images/ajaxloader_roller.gif' title='Roller / 辊'/></div>	
            <div class='option_text'><span class='font_text' title='Roller / 辊'>Roller</span></div>	
            <!-- br -->
            <div style='clear:both;'></div> 
            <!-- 3-1 -->
            <div class='option_input'><input id='ajaxloader7' name='ajaxloader' type='radio' value='css/snake.css' title='Snake / 蛇'/></div>
            <div class='option_image'><img src='./images/ajaxloader_snake.gif' title='Snake / 蛇'/></div>
            <div class='option_text'><span class='font_text' title='Snake / 蛇'>Snake</span></div>   
            <!-- 3-2 -->
            <div class='option_input'><input id='ajaxloader8' name='ajaxloader' type='radio' value='css/wheel.css' title='Wheel / 轮'/></div>
            <div class='option_image'><img src='./images/ajaxloader_wheel.gif' title='Wheel / 轮'/></div>	
            <div class='option_text'><span class='font_text' title='Wheel / 轮'>Wheel</span></div>			
            <!-- 3-3 -->
            <div class='option_input'><input id='ajaxloader9' name='ajaxloader' type='radio' value='css/3drotation.css' title='3D Rotation / 三维旋转'/></div>
            <div class='option_image'><img src='./images/ajaxloader_3drotation.gif' title='3d rotation / 三维旋转'/></div>	
            <div class='option_text'><span class='font_text' title='3D Rotation / 三维旋转'>3d rotation</span></div>	
            <!-- 3-4 -->
            <div class='option_input'><input id='ajaxloader10' name='ajaxloader' type='radio' value='css/arrows.css' title='Arrows / 箭头'/></div>
            <div class='option_image'><img src='./images/ajaxloader_arrows.gif' title='Arrows / 箭头'/></div>
            <div class='option_text'><span class='font_text' title='Arrows / 箭头'>Arrows</span></div>
            <!-- br -->
            <div style='clear:both;'></div>    
            <!-- 4-1 -->
            <div class='option_input'><input id='ajaxloader11' name='ajaxloader' type='radio' value='css/radar.css' title='Radar / 雷达'/></div>
            <div class='option_image'><img src='./images/ajaxloader_radar.gif' title='Radar / 雷达'/></div>	
            <div class='option_text'><span class='font_text' title='Radar / 雷达'>Radar</span></div>		
            <!-- 4-2 -->
            <div class='option_input'><input id='ajaxloader12' name='ajaxloader' type='radio' value='css/circleball1.css' title='Circle ball / 圈球'/></div>
            <div class='option_image'><img src='./images/ajaxloader_circleball1.gif' title='Circle ball / 圈球'/></div>
            <div class='option_text'><span class='font_text' title='Circle ball / 圈球'>Circle ball</span></div>    
            <!-- 4-3 -->
            <div class='option_input'><input id='ajaxloader13' name='ajaxloader' type='radio' value='css/refresh.css' title='Refresh / 刷新'/></div>
            <div class='option_image'><img src='./images/ajaxloader_refresh.gif' title='Refresh / '/></div>
            <div class='option_text'><span class='font_text' title='Refresh / 刷新'>Refresh</span></div>            
            <!-- 4-4-->
            <div class='option_input'><input id='ajaxloader14' name='ajaxloader' type='radio' value='css/static.css' title='Static / 静态'/></div>
            <div class='option_image'><img src='./images/ajaxloader_static.png' title='Static / 静态'/></div>
            <div class='option_text'><span class='font_text' title='Static / 静态'>Static</span></div>  
            <!-- br -->
            <div style='clear:both;'></div>             
            <!-- 5-1-->
            <div class='option_input'><input id='ajaxloader16' name='ajaxloader' type='radio' value='css/indicator2.css' title='Indicator / 指标'/></div>
            <div class='option_image'><img src='./images/ajaxloader_indicator2.png' title='Indicator 2 / 指标'/></div>
            <div class='option_text'><span class='font_text' title='Indicator / 指标'>Indicator 2</span></div>   
            <!-- 5-2-->
            <div class='option_input'><input id='ajaxloader18' name='ajaxloader' type='radio' value='css/spinner_v2_0.css' title='Indicator / 指标' /></div>
            <div class='option_image'><img src='./images/spinner_v2_0.gif' title='Google v2.0'/></div>	
            <div class='option_text'><span class='font_text' title='Google 2'>Google v2.0</span></div>	                        
            <!-- 5-2 -->
            <div class='option_input'><input id='ajaxloader15' name='ajaxloader' type='radio' value='#random#' title='Random / 随机'/></div>
            <div class='option_image'> <b>?</b></div>
            <div class='option_text'><span class='font_text' title='Random / 随机'>Random</span></div>            
            <!-- br -->
            <div style='clear:both;'></div>
            White
            <hr size="1" style='height: 1px;color:#CCC'/>      
            <!-- 6-1 -->
            <div style="background-color:#AAA;width:555px;height:30px;border:1px solid black;">
                <div class='option_input'><input id='ajaxloader17' name='ajaxloader' type='radio' value='css/white_spinner.css' title='White spinner / 白微调'/></div>
                <div class='option_image' style=''><img src='./images/white_spinner.png' title='White spinner / 白微调'/></div>
                <div class='option_text'  style='width:300px;'><span class='font_text' title='White spinner / 白微调' nowrap>White spinner</span></div>                  
            </div>     
    </fieldset>

    <p>With Google Ajax Loader you can personalize Gmail, Google Calendar, Google Docs, Google Maps and Google Reader with an Animated Ajax Loader. This extension displays a loading image while requested content is being loaded by AJAX Requests.</p>

  </section>

  <footer>
    <p>Powered by the Opera Browser</p>
  </footer>

<script>
addEventListener
(
    'DOMContentLoaded',
    function(){
        // storage
        var storage = widget.preferences;

        // glue for multiple values ( checkbox, select-multiple )
        var glue    = '\n';

        // get the FORM elements
        var formElements = document.querySelectorAll( 'input,select' );

        // list of FORM elements
        var skip            = hash( 'hidden,submit,image,reset,button' );
        var multipleValues  = hash( 'checkbox,select-multiple' );
        var checkable       = hash( 'checkbox,radio' );

        // string to hash
        function hash( str, glue ){
            var obj = {};
            var tmp = str.split(glue||',');

            while( tmp.length )
                obj[ tmp.pop() ] = true;

            return obj;
        }

        // walk the elements and apply a callback method to them
        function walkElements( callback )
        {
            var obj = [];
            for( var i=0,element=null; element=formElements[i++]; ){
                // skip the element if it has no name or is of a type with no useful value
                var type = element.type.toLowerCase();
                var name = element.name||'';
                if( skip[type]===true || name=='') continue;

                var tmp = callback( element, name, type );
                if( tmp!=null )
                    obj.push( tmp );
            }
            return obj;
        }


        // listener for element changes
        function changedElement( e ){
            var element = e.currentTarget||e;
            var type    = element.type.toLowerCase();
            var name    = element.name||'';

            var value   = multipleValues[type]!==true?element.value:walkElements
            (
                function( e, n, t ){
                    if( n==name && e.options ){
                        var tmp = [];
                        for( var j=0,option=null; option=e.options[j++]; ){
                            if( option.selected ){
                                tmp.push( option.value );
                            }
                        }
                        return tmp.join( glue );
                    }else if( n==name && checkable[t]===true && e.checked ){
                        return e.value;
                    }
                }
            ).join( glue );

            // set value
            storage.setItem( name, value );
        }

        // set the textContent of an element
        function setText( id, txt ){
            var e = document.getElementById(id);
            if( e ){
                e.textContent = txt;
            }
        }

        // populate the title, name, author, ...
        setText( 'widget-title', widget.name );
        setText( 'widget-name', widget.name );
        setText( 'widget-author', widget.author );

        // walk and set the elements accordingly to the storage
        walkElements
        (
            function( element, name, type ){
                var value       = storage[name]!==undefined?storage.getItem( name ):element.value;
                var valueHash   = hash( value, glue );

                if( element.selectedOptions ){
                    // 'select' element
                    for( var j=0,option=null; option=element.options[j++]; ){
                        option.selected = valueHash[option.value]===true;
                    }
                }else if( checkable[type]===true ){
                    // 'checkable' element
                    element.checked = valueHash[element.value]===true;
                }else{
                    // any other kind of element
                    element.value = value;
                }

                // set the widget.preferences to the value of the element if it was undefined
                // YOU MAY NOT WANT TO DO THIS
                if( storage[name]==undefined ){
                    changedElement( element );
                }

                // listen to changes
                element.addEventListener( 'change', changedElement, true );
            }
        );

    },
    false
);
</script>
</body>
</html>